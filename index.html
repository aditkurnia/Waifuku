<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>Chat Biru Putih</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-icons/1.11.3/font/bootstrap-icons.min.css" rel="stylesheet">
  <link href="styles.css" rel="stylesheet">
</head>
<body>
  <div class="app-shell">
    <header class="chat-header">
      <div class="left-group">
        <div class="profile-pic" id="profilePic">
          <img id="profileImage" src="" alt="AI">
          <i class="bi bi-person-fill" id="profileIcon"></i>
        </div>
        <div class="title-stack">
          <div class="chat-title" id="aiName">Rina</div>
          <div class="chat-subtitle"><span class="status-dot online" id="statusDot"></span><span id="statusText">Online</span> • Kamu: <span id="userNameDisplay">—</span></div>
        </div>
      </div>
      <div class="right-group">
        <button class="icon-btn" id="openTimeSkip" title="Time Skip"><i class="bi bi-fast-forward-fill"></i></button>
        <button class="icon-btn" id="openSettings" title="Pengaturan"><i class="bi bi-gear-fill"></i></button>
      </div>
    </header>

    <main class="chat-body" id="chatMessages"></main>

    <div class="typing-indicator" id="typingIndicator">
      <span class="dots">
        <span></span><span></span><span></span>
      </span>
      <span class="typing-text">mengetik...</span>
    </div>

    <footer class="chat-inputbar">
      <div class="input-wrap">
        <input type="text" id="messageInput" class="form-control message-input" placeholder="Ketik pesan" maxlength="1000">
        <button class="send-btn" id="sendButton"><i class="bi bi-send-fill"></i></button>
      </div>
    </footer>
  </div>

  <div class="modal fade" id="onboardingModal" tabindex="-1" data-bs-backdrop="static" data-bs-keyboard="false">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content onb">
        <div class="modal-header">
          <h5 class="modal-title">Mulai Percakapan</h5>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">Namamu</label>
              <input type="text" id="onbUserName" class="form-control" placeholder="Contoh: Adit" maxlength="30">
            </div>
            <div class="col-12">
              <label class="form-label">Nama AI</label>
              <input type="text" id="onbAiName" class="form-control" placeholder="Contoh: Rina" value="Rina Amelia" maxlength="30">
            </div>
            <div class="col-12 col-sm-6">
              <label class="form-label">Tempat</label>
              <input type="text" id="onbLocation" class="form-control" placeholder="Contoh: Jakarta" value="Jakarta" maxlength="40">
            </div>
            <div class="col-12 col-sm-6">
              <label class="form-label">Waktu Fiksi</label>
              <input type="datetime-local" id="onbDatetime" class="form-control">
            </div>
            <div class="col-12">
              <label class="form-label">Foto Profil AI</label>
              <input type="file" id="onbPhoto" class="form-control" accept="image/*">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-outline-secondary" id="onbReset">Reset</button>
          <button class="btn btn-primary" id="onbStart">Mulai Chat</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="settingsModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content onb">
        <div class="modal-header">
          <h5 class="modal-title">Pengaturan</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">Namamu</label>
              <input type="text" id="setUserName" class="form-control" maxlength="30">
            </div>
            <div class="col-12">
              <label class="form-label">Nama AI</label>
              <input type="text" id="setAiName" class="form-control" maxlength="30">
            </div>
            <div class="col-12 col-sm-6">
              <label class="form-label">Tempat</label>
              <input type="text" id="setLocation" class="form-control" maxlength="40">
            </div>
            <div class="col-12 col-sm-6">
              <label class="form-label">Waktu Fiksi</label>
              <input type="datetime-local" id="setDatetime" class="form-control">
            </div>
            <div class="col-12">
              <label class="form-label">Foto Profil AI</label>
              <input type="file" id="setPhoto" class="form-control" accept="image/*">
              <div class="d-flex gap-2 mt-2">
                <button class="btn btn-outline-danger btn-sm" id="btnRemovePhoto">Hapus Foto</button>
                <button class="btn btn-outline-secondary btn-sm" id="btnClearChat">Hapus Chat</button>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
          <button class="btn btn-primary" id="btnSaveSettings">Simpan</button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="timeSkipModal" tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content onb">
        <div class="modal-header">
          <h5 class="modal-title">Time Skip</h5>
          <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <div class="row g-2 mb-3">
            <div class="col-6"><button class="btn btn-outline-primary w-100 ts-preset" data-label="Keesokan harinya">Keesokan harinya</button></div>
            <div class="col-6"><button class="btn btn-outline-primary w-100 ts-preset" data-label="Sepulang sekolah">Sepulang sekolah</button></div>
            <div class="col-6"><button class="btn btn-outline-primary w-100 ts-preset" data-label="Malam harinya">Malam harinya</button></div>
            <div class="col-6"><button class="btn btn-outline-primary w-100 ts-preset" data-label="Seminggu kemudian">Seminggu kemudian</button></div>
          </div>
          <div class="row g-2">
            <div class="col-12">
              <input type="text" id="tsLabel" class="form-control" placeholder="Tulis label, contoh: Pagi di halte">
            </div>
            <div class="col-12">
              <input type="datetime-local" id="tsDatetime" class="form-control">
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
          <button class="btn btn-primary" id="applyTimeSkip">Lanjut</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
  <script src="app.js"></script>
</body>
</html>
